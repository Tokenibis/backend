{% load humanize %}

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=1024">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <style>
     @media print {
       @page {                
	 size: Letter;
       }
     }
     body {
      color: #3b3b3b;
      padding: 50px 0px;
     }
     .subtitle {
       color: #9b9b9b;
       font-style: italic;
       font-size: 16px;
     }
     hr {
       height: 0;
       border-top: 3px solid #e9e9e9;
     }
     a {
       text-decoration: none;
       color: #84ab3f;
       font-weight: bold;
     }
     p {
       font-size: 16px;
     }
     svg {
       height: 85%;
       width: 85%;
     }
     svg.icon {
       height: 50px;
       width: 50px;
       fill: #ffcfcf;
     }
     svg#ibis-icon {
       height: 32px;
       width: 32px;
      margin-top: -4px;
       fill: #3b3b3b;
     }
     .gr {
       font-weight: bold;
       color: #84ab3f;
     }
     .bd {
       font-weight: bold;
     }
    </style>
    <title>G{{ number }}: {{ title }}</title>
  </head>
  <body>
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-12" style="margin-top: -20px">
	  {% if object %}
	  <h1><span>{{ icons.ibis|safe }}</span>#{{ number }}: <span class="gr bd">{{ title }}</span></h1>
	  {% if progress == 100 %}
	  <p class="subtitle">Impact report for a grant of <span class="gr bd">{{ amount_str }}</span> on {{ object.created|date }}</p>
	  {% else %}
	  <p class="subtitle">This grant of <span class="gr bd">{{ amount_str }}</span> is currently being distributed (progress: <span class="gr bd">{{ progress }}%</span>)</p>
	  {% endif %}
	  {% else %}
	  <h1><span>{{ icons.ibis|safe }}</span>&nbsp;<span class="gr bd">{{ title }}</span></h1>
	  <p class="subtitle">Culmulative impact report for <span class="gr bd">{{ amount_str }}</span> worth of funding as of {{ now }}</p>
	  {% endif %}
	</div>
	<div class="col-12"><hr/></div>
	<div class="col-2 text-center">
	    <div>{{ icons.grant|safe }}</div>
	    {% if num_grants > 1 %}
	    <p class="gr bd">{{ num_grants|intcomma }} Grants</p>
	    {% else %}
	    <p class="gr bd">{{ num_grants }} Grant</p>
	    {% endif %}
	</div>
	<div class="col-1 text-center">
	    <div>{{ icons.arrow|safe }}</div>
	</div>
	<div class="col-2 text-center">
	    <div>{{ icons.person|safe }}</div>
	    {% if num_people > 1 %}
	    <p class="gr bd">{{ num_people|intcomma }} People</p>
	    {% else %}
	    <p class="gr bd">{{ num_peoples }} Person</p>
	    {% endif %}
	</div>
	<div class="col-1 text-center">
	    <div>{{ icons.arrow|safe }}</div>
	</div>
	<div class="col-2 text-center">
	    <div>{{ icons.donation|safe }}</div>
	    {% if num_donations > 1 %}
	    <p class="gr bd">{{ num_donations|intcomma }} Donations</p>
	    {% else %}
	    <p class="gr bd">{{ num_donations }} Donation</p>
	    {% endif %}
	</div>
	<div class="col-1 text-center">
	    <div>{{ icons.arrow|safe }}</div>
	</div>
	<div class="col-2 text-center">
	    <div>{{ icons.organization|safe }}</div>
	    {% if num_organizations > 1 %}
	    <p class="gr bd">{{ num_organizations|intcomma }} Organizations</p>
	    {% else %}
	    <p class="gr bd">{{ num_organizations }} Organization</p>
	    {% endif %}
	</div>
	<div class="col-12"><hr/></div>
	<div class="col-5">
	  <p style="padding-top: 20px">
	    {{ section_1|safe }}
	  </p>
	</div>
	<div class="col-7">
	  {{ distribution|safe }}
	</div>
	<div class="col-12"><hr/></div>
	<div class="col-6 text-center">
	  {{ payout|safe }}
	</div>
	<div class="col-6">
	  <p style="padding-top: 20px">
	    {{ section_2|safe }}
	  </p>
	</div>
	<div class="col-12"><hr/></div>
	<div class="col-6">
	  <p style="padding-top: 20px">
	    {{ section_3|safe }}
	  </p>
	</div>
	<div class="col-6 text-center">
	  <div style="width: 85%; padding: 20px; margin: 0 auto;">{{ circles|safe }}</div>
	</div>
	{% if section_4 %}
	<div class="col-12">
	  <div style='break-after:always'></div>
	  <hr/>
	  <div style="padding: 20px 0; width: 60%; margin: 0 auto">
	    {{ section_4|safe }}
	  </div>
	  <hr/>
	  <div style="padding: 20px 0" >
	    <div style="column-count: 2; overflow: hidden">
	      <ul style="list-style-type: none; margin: 0; padding: 0 20px;">
		{% for x in grantdonation %}
		<li>
		  <span class="bd">{{ x.donation.user }} <span class="gr bd">→</span> {{ x.donation.target }} <span class="gr bd">&ndash;</span> {{ x.amount }}:</span> {{ x.donation.description }} 
		  {% if x.reply %}
		  <ul class="gr bd" style="list-style-type: '↳'">
		    <li><span style="font-weight: normal; color: #9b9b9b">{{ x.reply.description }}</span></li>
		  </ul>
		  {% endif %}
		</li>
		{% endfor %}
	      </ul>
	    </div>
	  </div>
	</div>
	{% endif %}
      </div>
    </div>
  </body>
</html>
